<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>QR Code 掃描器</title>
    <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
    <div id="qr-reader" style="width: 500px; height: 500px;"></div>
    <div id="qr-reader-results"></div>
    
    <script>
        function docReady(fn) {
            if (document.readyState === "complete" || document.readyState === "interactive") {
                setTimeout(fn, 1);
            } else {
                document.addEventListener("DOMContentLoaded", fn);
            }
        }

        docReady(function () {
            const html5QrCode = new Html5Qrcode("qr-reader");
            const config = { 
                fps: 10, 
                qrbox: { width: 250, height: 250 }, 
                aspectRatio: 1.7777778,
                facingMode: "environment" // 使用後置鏡頭
            };
            html5QrCode.start(
                { facingMode: "environment" }, // 優先使用後置鏡頭
                config,
                (decodedText, decodedResult) => {
                    // 掃描成功時的回調函數
                    document.getElementById('qr-reader-results').innerHTML = decodedText;
                },
                errorMessage => {
                    // 掃描過程中的錯誤回調
                    console.log(`QR Code no longer in front of camera.`);
                }
            ).catch(err => {
                // 啟動掃描失敗時的錯誤處理
                console.error(`Unable to start scanning, error: ${err}`);
            });
        });
    </script>
</body>
</html>
